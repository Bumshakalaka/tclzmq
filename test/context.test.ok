package require tcltest
package require zmq 3

tcltest::test context-1 {zmq context} -body {
    zmq context
} -returnCodes {error} -result {wrong # args: should be "zmq context name ?io_threads?"}

tcltest::test context-2 {zmq context} -body {
    zmq context ctx -1
} -returnCodes {error} -result {Invalid argument}

tcltest::test context-3.1 {zmq context} -body {
    zmq context ctx
} -cleanup {
    ctx term
} -returnCodes {ok} -result {::ctx}

tcltest::test context-3.2 {zmq context} -body {
    zmq context ctx 1
} -cleanup {
    ctx term
} -returnCodes {ok} -result {::ctx}

tcltest::test context-3.2 {zmq context} -body {
    zmq context ctx 1
} -cleanup {
    ctx destroy
} -returnCodes {ok} -result {::ctx}

tcltest::test context-4 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx
} -cleanup {
    ctx term
} -returnCodes {error} -result {wrong # args: should be "ctx method ?argument ...?"}

tcltest::test context-5 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx qwerty
} -cleanup {
    ctx term
} -returnCodes {error} -result {bad method "qwerty": must be destroy, get, set, or term}

tcltest::test context-6 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx term
} -returnCodes {ok} -result {}

tcltest::test context-7 {zmq context} -setup {
    zmq context ctx 1
} -body {
    zmq context ctx 1
} -cleanup {
    ctx term
} -returnCodes {error} -result {command "::ctx" already exists, unable to create object}

tcltest::test context-8 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx set
} -cleanup {
    ctx term
} -returnCodes {error} -result {wrong # args: should be "ctx set name value"}

tcltest::test context-9 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx set QWERTY AZERTY
} -cleanup {
    ctx term
} -returnCodes {error} -result {bad name "QWERTY": must be IO_THREADS or MAX_SOCKETS}

tcltest::test context-10 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx set IO_THREADS AZERTY
} -cleanup {
    ctx term
} -returnCodes {error} -result {Wrong option value, expected integer}

tcltest::test context-11 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx set IO_THREADS 1
} -cleanup {
    ctx term
} -returnCodes {ok}

tcltest::test context-12 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx get
} -cleanup {
    ctx term
} -returnCodes {error} -result {wrong # args: should be "ctx get name"}

tcltest::test context-13 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx get QWERTY
} -cleanup {
    ctx term
} -returnCodes {error} -result {bad name "QWERTY": must be IO_THREADS or MAX_SOCKETS}

tcltest::test context-14 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx get IO_THREADS
} -cleanup {
    ctx term
} -returnCodes {ok} -result {1}

