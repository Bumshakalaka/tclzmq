package require tcltest
package require zmq

tcltest::test context-1 {zmq context} -body {
    zmq context
} -returnCodes {error} -result {wrong # args: should be "zmq context name io_threads"}

tcltest::test context-2 {zmq context} -body {
    zmq context ctx -1
} -returnCodes {error} -result {Invalid argument}

tcltest::test context-3 {zmq context} -body {
    zmq context ctx 1
} -cleanup {
    ctx term
} -returnCodes {ok} -result {::ctx}

tcltest::test context-4 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx
} -cleanup {
    ctx term
} -returnCodes {error} -result {wrong # args: should be "ctx method ?argument ...?"}

tcltest::test context-5 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx qwerty
} -cleanup {
    ctx term
} -returnCodes {error} -result {bad method "qwerty": must be term}

tcltest::test context-6 {zmq context} -setup {
    zmq context ctx 1
} -body {
    ctx term
} -returnCodes {ok} -result {}

tcltest::test context-7 {zmq context} -setup {
    zmq context ctx 1
} -body {
    zmq context ctx 1
} -cleanup {
    ctx term
} -returnCodes {error} -result {command "::ctx" already exists, unable to create object}

